{% extends 'base_layout.html' %}
{% load static %}
{% block content %}
    <div class="row justify-content-center align-items-center">
        <h5>Sus volúmenes totales han sido:</h5>
        <table id="transactions">
            <thead>
                <th>Moneda</th>
                <th>Volumen de compra</th>
                <th>Volumen de venta</th>
                <th>Ganancia / Pérdida realizada</th>
            </thead>
            <tbody>
                {% for volume in volumes %}
                {% if volume.total_volume|floatformat:3 > 0.000|floatformat:3 %}
                <tr class="profit">
                {% else %}
                <tr class="loss">
                {% endif %}
                    <td>{{ volume.symbol }} ({{ volume.pair_a_name_id }})</td>
                    <td>{{ volume.volume_buy|floatformat:3 }} USD</td>
                    <td>{{ volume.volume_sell|floatformat:3 }} USD</td>
                    <td class="result">{{ volume.gainloss|floatformat:3 }} USD</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div id="volumenesTotales" class="grafico"></div>
        <script>
            google.charts.setOnLoadCallback(drawBarColors);
            function drawBarColors() {
                // Define the chart to be drawn.
                var data = new google.visualization.arrayToDataTable([
                    ['Coin', 'Volumen de compra', 'Volumen de venta'],
                    {% for volume in volumes %}
                    ['{{ volume.pair_a_name_id }}', {{ volume.volume_buy|floatformat:2 }}, {{ volume.volume_sell|floatformat:2 }}],
                    {% endfor %}
                ]);
                var options = {
                    title: 'Volúmenes de compra y venta por moneda, en USD',
                    chartArea: {width: '75%'},
                    colors: ['#cd1c00', '#01a701'],
                    height: {% widthratio n_coins 1 25 %},
                    hAxis: {
                      title: 'Volumen (USD)',
                      minValue: 0
                    },
                    vAxis: {
                      title: 'Moneda'
                    }
                  };
                  var chart = new google.visualization.BarChart(document.getElementById('volumenesTotales'));
                  chart.draw(data, options);
            }
          </script>
    </div>
{% endblock  %}